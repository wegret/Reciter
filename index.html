<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reciter!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #message {
            display: none;
            color: green;
        }
    </style>
</head>

<body>
    <h1>Reciter!</h1>
    <button id="next-question">Next Question</button>
    
    <div id="quiz-container">
        <div id="question-title"></div>
        <div id="options-container"></div>
    </div>

    <button id="submit-answer">Submit Answer</button>

    <div id="result"></div>
    <div id="message">The question bank is not empty!</div>

    <script>
        let questions = []; // 题库
        let current_question = null;    // 当前题目

        async function question_init() {
            try {
                const response = await fetch('question.json');
                questions = await response.json();
                question_update();
            } catch (error) {
                console.error('Error loading questions:', error);
            }
        }

        /* 随机返回题目 */
        function question_random() {
            const index = Math.floor(Math.random() * questions.length);
            return questions[index];
        }

        /* 更新当前题目并显示 */
        function question_update() {
            current_question = question_random();
            document.getElementById('question-title').innerText = current_question.title;
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            if (current_question.type.startsWith("单选")) {
                current_question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                            <input type="radio" name="option" value="${index}" id="option${index}">
                            <label for="option${index}">${option}</label>
                        `;
                    optionsContainer.appendChild(optionElement);
                });
            } else if (current_question.type.startsWith("多选")) {
                current_question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                            <input type="checkbox" name="option" value="${index}" id="option${index}">
                            <label for="option${index}">${option}</label>
                        `;
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                        <input type="text" id="user-answer" placeholder="请输入答案">
                    `;
                optionsContainer.appendChild(optionElement);
            }
        }

        /* 判题并统计 */
        function question_check(){
            
        }

        document.getElementById('next-question').addEventListener('click', question_update);
        document.getElementById('submit-answer').addEventListener('click', question_check);

        question_init();

    </script>
</body>

</html>